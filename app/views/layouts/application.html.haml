%html
  %head
    %title HetGenotApp
    %meta{name:"viewport", content:"width=device-width,initial-scale=1"}
    = csrf_meta_tags
    = csp_meta_tag

    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload"
    = javascript_importmap_tags

  %body
    %head
      - if user_signed_in?
        %div
          - basket = session[:basket] || {}
          = "Basket contains #{pluralize(basket.length, "item", "items")}"
          = link_to "View Basket", basket_index_path

    %nav
      %ul
        %li= link_to "Home", root_path
        %li= link_to "Contact", contact_new_path
        %li= link_to "Webshop", products_path
        %li= link_to "About Us", about_us_path
        - if user_signed_in?
          - if current_user.admin?
            %li= link_to "Admin Dashboard", admin_root_path
          %li= link_to "Logout", destroy_user_session_path, data: {turbo_method: :delete}
        - else
          %li= link_to "Sign in", new_user_session_path
          %li= link_to "Register", new_user_registration_path

    %div
      - if flash[:notice]
        %p= flash[:notice]
      - if flash[:success]
        %p= flash[:success]

    = yield
