%html
  %head
    %title HetGenotApp
    %meta{name:"viewport", content:"width=device-width,initial-scale=1"}
    = csrf_meta_tags
    = csp_meta_tag

    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = javascript_importmap_tags

  %body
    %nav
      %div= link_to "Home", root_path
      %div= link_to "Contact", contact_new_path
      %div= link_to "Webshop", products_path
      %div= link_to "About Us", about_us_path
      - if user_signed_in?
        - if current_user.admin?
          %div.right= link_to "Admin Dashboard", admin_root_path
        %div.right= link_to "Logout", destroy_user_session_path, data: {turbo_method: :delete}
      - else
        %div.right= link_to "Sign in", new_user_session_path
        %div.right= link_to "Register", new_user_registration_path
      - if user_signed_in?
        %div.basket.right
          - basket = session[:basket] || {}
          = link_to "View Basket", basket_index_path
          = "#{pluralize(basket.length, "item", "items")}"

    %div
      - if flash[:notice]
        %p= flash[:notice]
      - if flash[:success]
        %p= flash[:success]

    %main
      = yield

  %footer
    %div.center
      = "Copyright Joris Sperling @ FHICT (C) #{DateTime.current.year.to_s}"